# Europa Engine Patcher

## Overview

  Paradox社のEuropa Engineを使用したゲームを日本語化するためのツールです。
  TObject様のparadox JP-Patcherを全面的に参考にしています。

## Supports

- Crusader Kings Deus Vult 2.1beta
- Europa Universalis 1.09
- For the Glory 1.2
- Victoria Revolutions 2.01 Hotfix 6
- Hearts of Iron 1.06c
- Hearts of Iron 2 Doomsday Armageddon 1.2/1.3beta2 Hotfix
- Arsenal of Democracy 1.04/1.07/1.08/1.09/1.10rc7
- Darkest Hour 1.02/1.03/1.04/1.05/1.05.1

## Hou to use

1. 次の.Netランタイムライブラリをインストールして下さい。[Microsoft .NET Framework 3.5 Service Pack 1 (フル パッケージ)](http://www.microsoft.com/ja-jp/download/details.aspx?id=25150)
2. EuropaEnginePatcher.exeを起動します。
3. ツールのウィンドウにゲームの実行ファイルをドロップします。
4. しばらく待つと「パッチの適用に成功しました。」と表示されるのでツールを終了して下さい。
5. 日本語化ファイル一式をゲームフォルダへ上書きコピーし、ゲームを開始して下さい。

## Patch options

### 自動処理モード

ウィンドウへゲームの実行ファイルをドロップ、ゲームの実行ファイルを参照して選択、開始キーを押した時にパッチ当て、保存、日本語化DLLのコピーを連続して行います。

### 元のファイルをリネーム

チェックを入れると元のファイルを～En.exeに変更し、パッチを当てた後のファイルで元のファイルを置き換えます。チェックを入れていないとパッチを当てた後のファイルを～Jp.exeで保存し、元のファイルを変更しません。(Ver0.46以前の動作)

### テキスト自動折り返し

文字列が表示幅を超える場合に自動改行します。ある程度の禁則処理も行います。これを有効にすれば、日本語版用のMODもそのまま使えるはずです。

### 自動命名時の語順変更

ユニット名のストックが切れて自動で命名される時に、「第1歩兵師団」のように日本語の語順で命名することを可能にします。和訳テキスト側の対応が必要ですので、和訳側での対応が完了しているか、下の説明を読んで理解できる人のみチェックを入れて下さい。

### 強制ウィンドウ化

強制的にウィンドウモードで起動するようにします。一旦パッチを当てるとフルスクリーンモードに戻せません。フルスクリーンに戻したい時にはパッチを当て直して下さい。DDA版Iron Crossではゲーム付属のツールで変更できるのでこの設定は無視されます。

### イントロスキップ

起動時に表示される動画を強制的にスキップします。一旦パッチを当てると戻すことができません。戻したい時にはパッチを当て直して下さい。

### 時間制限解除

一般にNTLと呼ばれているものです。1年～9999年の間でプレイ可能にします。

### 4GBメモリ使用

一般に4GBパッチと呼ばれているものです。64bitOSで4GBのメモリを使用可能にします。効果があるかどうかはわかりません。

### 16bitカラー設定

Windows8以降でウィンドウ化する際の16bitカラー設定を自動処理します。この設定は実行ファイルではなく、レジストリの設定を書き換えます。実行ファイルの場所を移動した場合には手動で設定し直して下さい。

## Notice

1. ツールの使用は自己責任でお願いします。何かあった時には元の状態に戻せるように!
2. オリジナルのファイルを上書きしないように、バックアップを取っておきましょう。
3. 基本的に拡張パック導入済みの最新版でしか動作検証していません。

## 和訳作者様向け連絡事項

### １

DHの研究概要画面で最大上陸規模の項目にゴミが表示される問題を解消するため、定義名をEE_MAX_AMPHIB_MOD_TITLEに変更しています。configファイルのどこかに以下の定義を追加して下さい。

```text
----- ここから
EE_MAX_AMPHIB_MOD_TITLE;上陸戦最大規模;Max amphibious size;;;;;;;;;X
----- ここまで
```

### ２

Vic/HoI/HoI2/AoD/DHでユニット自動命名時に日本語の語順になるよう埋め込み文字列を変更する機能を提供しました。利用される場合は、和訳テキストの以下の定義を変更して下さい。

```text
----- ここから
0TH;第;th;;;;;;;;;X
1ST;第;st;;;;;;;;;X
2ND;第;nd;;;;;;;;;X
3TH;第;rd;;;;;;;;;X
4TH;第;th;;;;;;;;;X
5TH;第;th;;;;;;;;;X
6TH;第;th;;;;;;;;;X
7TH;第;th;;;;;;;;;X
8TH;第;th;;;;;;;;;X
9TH;第;th;;;;;;;;;X
3RD;第;rd;;;;;;;;;X
1TH;第;th;;;;;;;;;X
2TH;第;th;;;;;;;;;X
----- ここまで
```

定義の場所は、以下のようにゲームにより異なります。

- Vic/HoI/HoI2: config/text.csv
- AoD: config/boostertext.csv および config/text.csv
- DH: config/text.csv および Mods/Darkest Hour Full/config/text.csv

また、Victoriaの場合は国家序列の序数を分離しましたので、configファイルのどこかに以下の定義も追加して下さい。

```text
----- ここから
RANKING_SUFFIX;位;;;;;;;;;;X
----- ここまで
```

### 3

オリジナルの_inmm.iniから以下の指定を追加しています。

#### MaxLines=[行数]

文字幅計算処理を指定行数で打ち切ります。HoI2系で巨大タワーにカーソルを合わせるとパフォーマンスが著しく低下する問題の対策です。デフォルトは54行です。指定行数で打ち切った時に文字列終端をセットしますので、以降の行は表示されなくなります。

#### MaxWordChars=[文字数]

色指定後の分離禁則処理、連数字の分離禁則処理を指定バイト数で打ち切ります。
FtGの外交画面等で色指定された文字列が表示幅を超えると落ちる問題の対策です。
2バイト文字は2文字として扱います。
デフォルトは24文字です。

## Restrictions

1. Steam版には対応していません。(解決不能)
     プログラム部分が圧縮or暗号化されてており、パッチを当てる位置が判別できないためです。
     DHなどゲームの種類によっては動作するものがありますが、
     作者が検証できない以上サポート外とします。
     Steam版の日本語化方法に関する質問には答えられません。
2. チャットウィンドウで日本語変換中にCtrlキーを押すと文字化けします。

## Thanks

  paradox JP-Patcherを作成されたTObject様に感謝を捧げます。
  最初に作られた時が最も大変だったということを実感しました。
